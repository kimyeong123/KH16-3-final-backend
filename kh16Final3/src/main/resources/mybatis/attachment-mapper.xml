<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="attachment">


    <select id="sequence" resultType="int">
        select attachment_seq.nextval from dual
    </select>

    <!-- 등록 -->
    <insert id="add">
        insert into attachment(
            attachment_no,
            attachment_type,
            attachment_path,
            attachment_category,
            attachment_parent,
            attachment_original_name,
            attachment_stored_name,
            attachment_size
        ) values(
            #{attachmentNo},
            #{attachmentType},
            #{attachmentPath},
            #{attachmentCategory},
            #{attachmentParent},
            #{attachmentOriginalName},
            #{attachmentStoredName},
            #{attachmentSize}
        )
       
    </insert>

   
    <select id="detail" resultType="AttachmentDto">
        select *
        from attachment
        where attachment_no = #{attachmentNo}
    </select>


    <select id="listByParent" resultType="AttachmentDto">
        select *
        from attachment
        where attachment_category = #{attachmentCategory}
          and attachment_parent   = #{attachmentParent}
        order by attachment_no asc
    </select>


    <delete id="delete">
        delete attachment
        where attachment_no = #{attachmentNo}
    </delete>


    <delete id="deleteByParent">
        delete attachment
        where attachment_category = #{attachmentCategory}
          and attachment_parent   = #{attachmentParent}
    </delete>

</mapper>
